---
include:
  - docassemble.AssemblyLine:al_package.yml
  - docassemble.ALMassachusetts:al_massachusetts.yml
  - docassemble.MassAccess:massaccess.yml
---
metadata:
  title: |
    Petition to Change the Name of a Minor - CJP25
  short title: |
    Minor name change petition
  tags:
    - FA-00-00-00-00
---
mandatory: True
comment: |
  This contains metadata that will not be overwritten if this YAML file is included in another
  file. Each file gets its own key in the interview_metadata dictionary.
  Most keys are not currently used at runtime, other than "allowed courts".
code: |
  interview_metadata
  if not defined("interview_metadata['petition_to_name_change_minor_CJP25']"):
    interview_metadata.initializeObject("petition_to_name_change_minor_CJP25")
    interview_metadata["petition_to_name_change_minor_CJP25"].update({
      "al_weaver_version": "1.0.2",
      "generated on": "2021-06-09",
      "title": "Petition to Change the Name of a Minor",
      "short title": "Name change minor petition cjp25",
      "description": "This form will help you to change the name for a minor child.",
      "original_form": "https://courtforms.jud.state.ma.us/publicforms/PFC0021",
      "allowed courts": [
        "Probate and Family Court",
      ],
      "categories": [
        "FA-00-00-00-00",
      ],        
      "logic block variable": "interview_order_petition_to_name_change_minor_CJP25",
      "attachment block variable": "petition_to_name_change_minor_CJP25_attachment",
      "typical role": "plaintiff",
    })
---
code: |
  interview_short_title = "Ask the court to change your child's name"
---
code: |
  al_form_type = 'starts_case'
---
objects:
  - users: ALPeopleList.using(ask_number=True,target_number=1)
  - notary_public: ALPeopleList.using(there_are_any=True)
  - parents: ALPeopleList.using(ask_number=True,complete_attribute="complete")
  - guardians: ALPeopleList.using(ask_number=True,complete_attribute="complete")
  - attorneys: ALPeopleList.using(ask_number=True,target_number=1)
---
sections:
  - review_petition_to_name_change_minor_CJP25: Review your answers
---
#################### Interview order #####################
comment: |
  Controls order and branching logic for questions specific to this form
id: interview_order_petition_to_name_change_minor_CJP25
code: |
  # Set the allowed courts for this interview
  allowed_courts = interview_metadata["petition_to_name_change_minor_CJP25"]["allowed courts"]
  nav.set_section('review_petition_to_name_change_minor_CJP25')
  user_role = 'plaintiff'
  users[0].name.first
  users[0].address.address
  doc_or_dys_yes
  prior_name_change
  if prior_name_change == True:
    user_name_change_from
  users.gather()
  set_parts(subtitle=str(users))
  set_progress(10.0)
  users[0].birthdate
  users[0].address.address
  user_needs_interpreter
  set_progress(20.0)
  if one_parent_listed == True:
    deceased_parent_listed_yes
  parent_listed_rights_terminated_yes
  #parent personal info and interpreter question loop
  parents[0].name.first
  parents[0].address.address
  parents[0].phone_number
  if parents.target_number == 2:
    parents[1].name.first
    parents[1].address.address
    parents[1].phone_number
  if parent_presenting == True:
    guardians.there_are_any = False
    parents.gather()
    for parent in parents:
      if parent.is_presenting: 
        parent.needs_interpreter
  if parent_presenting == False:
    if number_of_guardians == True:
      guardians[0].name.first
      guardians[0].address.address
      guardians[0].phone_number
    else:
      if number_of_guardians == False:
        guardians[0].name.first
        guardians[0].address.address
        guardians[0].phone_number
        guardians[1].name.first
        guardians[1].address.address
        guardians[1].phone_number
    for guardian in guardians:
      if guardian.is_presenting: 
        guardian.needs_interpreter
  set_progress(30.0)
  minor_under_12_yes
  for parent in parents: 
    if parent.is_presenting:
      parent.gives_assent
  for guardian in guardians: 
    if guardian.is_presenting:
      guardian.gives_assent
  set_progress(40.0)
  guardian_explanation
  interpreter_languages
  new_name_first
  user_name_change_reason_1
  set_progress(50.0)
  set_progress(60.0)
  set_progress(70.0)
  set_progress(80.0)
  if attorney_yes_no == True:
    attorneys.gather()
    attorneys[0].address.address
    attorneys[0].phone_number
    attorney_bbo
  return_request_yes
  courts[0].division
  interview_order_petition_to_name_change_minor_CJP25 = True
---
code: |
  docket_number = ''
---
code: |
  if parent_presenting == True:
    guardians.target_number = 0
---
code: |
  if parent_presenting == False:
    parents[0].is_presenting = False
    parents[0].needs_interpreter = False
    parents[1].is_presenting = False
    parents[1].needs_interpreter = False
---
code: |
  if one_parent_listed == True:
    parents.target_number = 1
    parents[1].complete = True
    parents[1].is_presenting = False
    parents[1].needs_interpreter = False
---
code: |
  if one_parent_listed == False:
    parents.target_number = 2
---
code: |
  if number_of_guardians == True:  
    guardians.target_number = 1
    guardians[1].complete = True
    guardians[1].is_presenting = False
---
code: |
  if number_of_guardians == False:
    guardians.target_number = 2
---
code: |
  parents[i].name.first
  parents[i].address.address
  parents[i].phone_number
  parents[i].email
  parents[i].is_presenting
  parents[i].complete = True
---
code: |
  guardians[i].name.first
  guardians[i].address.address
  guardians[i].phone_number
  guardians[i].email
  #if SME says that they can still have interpreter when not presenting then readdress this
  if guardians[i].is_presenting == True:
    guardians[i].needs_interpreter
  else:
    guardians[i].needs_interpreter = False
  guardians[i].complete = True
---
recalculate: True
code: |
  temp_interpreter_languages = []
  if user_needs_interpreter == True:
    temp_interpreter_languages.append(user_preferred_language)
  
  for parent in parents:
    if parent.is_presenting == False: 
      parent.needs_interpreter = False
    if parent.needs_interpreter == True:
      temp_interpreter_languages.append(parent.preferred_language)
      
  for guardian in guardians:
    if guardian.is_presenting == False: 
      guardian.needs_interpreter = False
    if guardian.needs_interpreter == True:
      temp_interpreter_languages.append(guardian.preferred_language)
      
  interpreter_languages = temp_interpreter_languages
---
recalculate: True
code: |
  temp_guardian_explanation = []
  
  for guardian in guardians:
    if guardian.gives_assent == False: 
      temp_guardian_explanation.append(guardian.no_assent_explanation)
  
  guardian_explanation = temp_guardian_explanation
---
###################### Main order ######################
comment: |
  This block includes the logic for standalone interviews.
  Delete mandatory: True to include in another interview
mandatory: True
code: |
  al_intro_screen
  petition_to_name_change_minor_CJP25_intro
  interview_order_petition_to_name_change_minor_CJP25
  #signature_date
  # Save anonymized interview statistics (customize the saved data below)
  store_variables_snapshot(data={'zip': users[0].address.zip})
  petition_to_name_change_minor_CJP25_preview_question
  #basic_questions_signature_flow
  #notary_public[0].signature
  #attorneys[0].signature
  #parents[1].signature
  #guardians[0].signature
  #users[0].signature
  #parents[0].signature
  petition_to_name_change_minor_CJP25_download
---
comment: |
  This interview will guide you through the process of filing a CJP25 Petition to Change the Name of a Minor by Asking a Questions concerning information on the child, their parents or guardians, and other relevant information.
id: minor name change petition
continue button field: petition_to_name_change_minor_CJP25_intro
question: |
  File a petition to change the name of a minor child
subquestion: |
  This interview will require the name, address, and contact information for the parents on the minor child's birth certificate. 
  
  If you are a guardian filling this form out on behalf of a minor child, you will need to bring proof of guardianship with you to get these documents notarized.
---
id: attorney_yes_no
question: |
  Do you have an attorney?
subquestion: |
  An attorney is not required to file, but you may have one if you wish in the event that there is a hearing regarding this name change petition (i.e., if an involved party does not agree to the filing of this petition).
field: attorney_yes_no
buttons: 
  - "Yes": True
  - "No": False
---
id: parents names
sets:
  - parents[i].name.first
  - parents[i].name.last
question: |
  What is the name of the ${ ordinal(i) } parent appearing on the minor child's birth certificate?
fields:
  - code: |
      parents[i].name_fields()
---
id: guardians names
sets:
  - guardians[i].name.first
  - guardians[i].name.last
question: |
  What is the ${ ordinal(i) } guardian's name?
fields:
  - code: |
      guardians[i].name_fields()
---
id: minor child address information
sets:
  - users[0].address.address
  - users[0].address.city
  - users[0].address.zip
question: |
  What is the minor child's current address?
fields:
  - code: |
      users[0].address_fields()
---
id: parent 1 bc contact information
question: |
  What is the first parent's contact information?
fields:
  - "Phone number": parents[0].phone_number
  - "Email address": parents[0].email
---
id: parent 2 bc contact information
question: |
  What is the second parent's contact information?
fields:
  - "Phone number": parents[1].phone_number
  - "Email address": parents[1].email
---
id: guardian 1 contact information
question: |
  What is the first guardian's contact information?
fields:
  - "Phone number": guardians[0].phone_number
  - "Email address": guardians[0].email
---
id: guardian 2 contact information
question: |
  What is the second guardian's contact information?
fields:
  - "Phone number": guardians[1].phone_number
  - "Email address": guardians[1].email
---
id: attorney contact information
question: |
  What is your attorney's contact information?
fields:
  - "Phone number": attorneys[0].phone_number
  - "Email address": attorneys[0].email
---
id: number of guardians
question: |
  How many court-appointed guardians does the minor child have?
subquestion: |
  This form only provides space to enter the information for two court-appointed guardians.
field: number_of_guardians
buttons: 
  - "One": True
  - "Two": False
---
id: parents or guardians
question: |
  Is the minor child currently in the custody of legal parents or court-appointed guardians?
subquestion: |
  If the minor child is currently in the custody of court-appointed guardians, bring proof of guardianship when you go to see a notary public.
field: parent_presenting
buttons: 
  - "Parent(s)": True
  - "Guardian(s)": False
---
id: user information
sets:
    - users[0].name.first
    - users[0].name.last
question:  |
  What is the minor child's full name?
fields:
  - code: |
      users[0].name_fields()
---
id: guardian presenting
question: |
  Is the ${ordinal(i)} guardian presenting the form on behalf of the child?
yesno: guardians[i].is_presenting
---
id: parent presenting
question: |
  Is the ${ordinal(i)} parent presenting the form on behalf of the child?
yesno: parents[i].is_presenting
---
id: any guardians
question: |
  Does the child have any guardians?
yesno: guardians.there_are_any
---
id: how many guardians
question: |
  How many guardians does the child currently have?
field: one_guardian_listed
buttons:
  - "One guardian": True
  - "Two guardians": False
---
id: how many parents on bc
question: |
  How many parents are listed on the child's birth certificate?"
field: one_parent_listed
buttons:
  - "1 parent": True
  - "2 parents": False
---
id: address is DOC or DYS facility
question: |
  Is the child's current address a correctional facility?
subquestion: |
  Examples of correctional facilities include those under the supervision of the Department of Corrections or the Department of Youth Services.
yesno: doc_or_dys_yes
---
id: prior name change yesno
question: |
  Has any court changed the minor child's name before?
yesno: prior_name_change
---
id: prior name change info
question: |
  What is the minor child's most recent prior name?
fields:
  - "Previous name": user_name_change_from
    maxlength: 82
  - "New name": user_name_change_to
    maxlength: 82
  - "Reason for name change": user_name_change_reason
    maxlength: 82
---
id: return request
question: |
  Would you like to request a return, by first class mail, of all certified copies of documents filed with the court after review and processing?
yesno: return_request_yes
---
id: deceased parent
question: |
  Is any legal parent listed on the child's birth certificate deceased?
subquestion: |
  If so, bring a copy of the parent's death certificate with you when you go to see a notary public.
yesno: deceased_parent_listed_yes
---
id: parental rights terminated
question: |
  Has any legal parent listed on the child's birth certificate had their parental rights terminated in a prior proceeding?
subquestion: |
  If so, bring proof of the parent's rights being terminated with you when you go to see a notary public.
yesno: parent_listed_rights_terminated_yes
---
#id: court-appointed guardian
#question: |
#  Does the child have a court-appointed guardian?
#subquestion: |
#  If so, bring proof of guardianship with you when you go to see a notary public.
#yesno: guardian
---
id: minor assent
question: |
  Is the minor child over the age of 12 and able to assent to this petition?
subquestion: |
  If the minor child is under 12 years of age, they cannot assent to this petition.
noyes: minor_under_12_yes
---
id: parent 1 assent
question: |
  Does the ${ordinal(i)} parent agree to this petition?
fields:
  - "Assent": parents[i].gives_assent
    datatype: yesnoradio
  - "Explanation for not assenting": parents[i].no_assent_explanation
    hide if: parents[i].gives_assent
---
id: guardian assent
question: |
  Does the ${ordinal(i)} court-appointed guardian agree to this petition?
fields:
  - "Assent": guardians[i].gives_assent
    datatype: yesnoradio
  - "Explanation for not assenting": guardians[i].no_assent_explanation
    hide if: guardians[i].gives_assent
---
id: new name info
question: |
  What name does the minor child wish to change to?
fields:
  - "New first name": new_name_first
  - "New middle name": new_name_middle
    required: false
  - "New last name": new_name_last
---
id: new name reason
question: |
  Why does the minor child wish to change their name?
fields:
  - "Reason": user_name_change_reason_1
    input type: area
    maxlength: 180
---
id: user interpreter selection
question: |
  Will the minor child require an interpreter in the event of a hearing?
fields:
  - "Interpreter": user_needs_interpreter
    datatype: yesnoradio
  - "Preferred interpreter language:": user_preferred_language
    show if: user_needs_interpreter
---
id: parent interpreter selection
question: |
  Will the ${ordinal(i)} parent require an interpreter in the event of a hearing?
fields:
  - "Interpreter": parents[i].needs_interpreter
    datatype: yesnoradio
  - "Preferred interpreter language:": parents[i].preferred_language
    show if: parents[i].needs_interpreter
---
id: guardian interpreter selection
question: |
  Will the ${ordinal(i)} guardian require an interpreter in the event of a hearing?
fields:
  - "Interpreter": guardians[i].needs_interpreter
    datatype: yesnoradio
  - "Preferred interpreter language:": guardians[i].preferred_language
    show if: guardians[i].needs_interpreter
---
id: minor signature date
question: |
  Enter the date that the minor signed the form in the presence of a Notary Public.
fields:
  - "Date of user signature.": user_signature_date
    datatype: date
---
id: minor appearance date
question: |
  Enter the date that minor appeared before the Notary Public and the form of ID presented.
fields:
  - "User appearance day.": user_date_day
    maxlength: 7
  - "User appearance year.": user_date_year
    maxlength: 4
  - "User appearance month.": user_date_month
    maxlength: 7
  - "Minor ID form.": user_id
    maxlength: 21
under: |
  Note: Enter day, year, and month as a two-digit number. (i.e., 12/07/'21)
---
id: NP commission expiration
question: |
  Enter the date that the Notary Public's commission expires.
fields:
  - "Date of Notary Public commission expiration.": date_commission_expiration
    datatype: date
---
id: legal mother/parent 1 signature date
question: |
  Enter the date that the Legal Mother/Parent 1 signed this form in the presence of the Notary Public.
fields:
  - "Date of Legal Mother/Parent 1 signature.": parent1_signature_date
    datatype: date
---
id: legal mother/parent 1 appearance date
question: |
  Enter the date that the Legal Mother/Parent 1 appeared before the Notary Public and the form of ID presented.
fields:
  - "Legal Mother/Parent 1 appearance day.": parent1_date_day
    maxlength: 7
  - "Legal Mother/Parent 1 appearance year.": parent1_date_year
    maxlength: 4
  - "Legal Mother/Parent 1 appearance month.": parent1_date_month
    maxlength: 7
  - "Legal Mother/Parent 1 ID form.": parent1_id
    maxlength: 22
under: |
  Note: Enter day, year, and month as a two-digit number. (i.e., 12/07/'21)
---
id: legal father/parent 2 signature date
question: |
  Enter the date that the Legal Father/Parent 2 signed this form in the presence of a Notary Public.
fields:
  - "Date of Legal Father/Parent 2 signature.": parent2_signature_date
    datatype: date
---
id: legal father/parent 2 appearance date
question: |
  Enter the date that the Legal Father/Parent 2 appeared before the Notary Public and the form of ID presented.
fields:
  - "Legal Father/Parent 2 appearance year.": parent2_date_year
    maxlength: 4
  - "Legal Father/Parent 2 appearance month.": parent2_date_month
    maxlength: 7
  - "Legal Father/Parent 2 appearance day.": parent2_date_day
    maxlength: 7
  - "Legal Father/Parent 2 ID form.": parent2_id
    maxlength: 22
under: |
  Note: Enter day, year, and month as a two-digit number. (i.e., 12/07/'21)
---
id: guardian signature date
question: |
  Enter the date that the Guardian signed in the presence of the Notary Public.
fields:
  - "Date of guardian signature": guardian_signature_date
    datatype: date
---
id: guardian name
question: |
  Enter the full printed Guardian name.
fields:
  - "Full printed Guardian name.": guardian_name_full_printed
    maxlength: 32
---
id: guardian appearance date
question: |
  Enter the date that the Guardian appeared before the Notary Public and the form of ID presented.
fields:
  - "Guardian appearance month.": guardian_date_month
    maxlength: 7
  - "Guardian appearance year.": guardian_date_year
    maxlength: 4
  - "Guardian appearance day.": guardian_date_day
    maxlength: 7
  - "Guardian ID form.": guardian_id
    maxlength: 22
---
id: attorney BBO
question: |
  Enter your attorney's BBO#.
fields:
  - "Attorney BBO#.": attorney_bbo
    maxlength: 44
---
id: preview petition_to_name_change_minor_CJP25
question: |
  Preview your form before finishing.
subquestion: |
  Here is a preview of the form you will sign on the next page.   
  
  ${ al_court_bundle.as_pdf(key='preview') }

  Click the image to open it in a new tab. Click the "Make changes" button
  to edit your answers.

  ${ action_button_html(url_action('review_petition_to_name_change_minor_CJP25'), label='Make changes', color='info') }
  
  Remember to come back to this window to continue and sign your form.
continue button field: petition_to_name_change_minor_CJP25_preview_question    
---
id: petition to name change minor CJP25 review screen
event: review_petition_to_name_change_minor_CJP25
question: |
  Review your answers
review:
  - Edit: parents[1].is_presenting
    button: |
      **Presented by the Legal Father/Parent 2**:
      ${ word(yesno(parents[1].is_presenting)) }
  - Edit: parents[0].is_presenting
    button: |
      **Presented by the Legal Mother/Parent 1**:
      ${ word(yesno(parents[0].is_presenting)) }
  - Edit: guardians[i].is_presenting
    button: |
      **Presented by the Guardian**:
      ${ word(yesno(guardians[0].is_presenting or guardians[1].is_presenting)) }
  - Edit: doc_or_dys_yes
    button: |
      **Under Supervision of Massachusetts Department of Corrections or Department of Youth Services**:
      ${ word(yesno(doc_or_dys_yes)) }
  - Edit: prior_name_change
    button: |
      **Prior Name Change?**:
      ${ word(yesno(prior_name_change)) }
  - Edit: user_name_change_from
    button: |
      **Previous Name**:
      ${ user_name_change_from }
  - Edit: user_name_change_to
    button: |
      **New Name**:
      ${ user_name_change_to }
  - Edit: user_name_change_reason
    button: |
      **Reason for Name Change**:
      ${ user_name_change_reason }
  - Edit: return_request_yes
    button: |
      **Request Return by First Class Mail**:
      ${ word(yesno(return_request_yes)) }
  - Edit: one_parent_listed
    button: |
      **One Parent Listed on Child\'s Birth Certificate**:
      ${ word(yesno(one_parent_listed)) }
  - Edit: deceased_parent_listed_yes
    button: |
      **One Parent Listed on Child\'s Birth Certificate is Deceased**:
      ${ word(yesno(deceased_parent_listed_yes)) }
  - Edit: parent_listed_rights_terminated_yes
    button: |
      **One Parent Listed on Child\'s Birth Certificate had their Parental Rights Terminated in a Prior Proceeding**:
      ${ word(yesno(parent_listed_rights_terminated_yes)) }
  - Edit: guardian
    button: |
      **Does the Child have a Court-Appointed Guardian**:
      ${ word(yesno(guardian)) }
  - Edit: minor_under_12_yes
    button: |
      **Not applicable. The minor child is not 12 years of age or older.**:
      ${ word(yesno(minor_under_12_yes)) }
  - Edit: parents[0].gives_assent
    button: |
      **Legal Mother/Parent 1 Assents to the Petition.**:
      ${ word(yesno(parents[0].gives_assent)) }
  - Edit: parents[0].no_assent_explanation
    button: |
      **Legal Mother/Parent 1 explanation for no assent.**:
      > ${ single_paragraph(parents[0].no_assent_explanation) }
  - Edit: parents[1].gives_assent
    button: |
      **Legal Father/Parent 2 Assents to the Petition.**:
      ${ word(yesno(parents[1].gives_assent)) }
  - Edit: parents[1].no_assent_explanation
    button: |
      **Legal Father/Parent 2 explanation for no assent.**:
      > ${ single_paragraph(parents[1].no_assent_explanation) }
  - Edit: guardians[0].gives_assent or guardians[1].gives_assent
    button: |
      **Guardian Assents to the Petition.**:
      ${ word(yesno(guardians[0].gives_assent or guardians[1].gives_assent)) }
  - Edit: guardians[0].no_assent_explanation or guardians[1].no_assent_explanation
    button: |
      **Guardian explanation for no assent.**:
      > ${ single_paragraph(guardian_explanation) }
  - Edit: guardians.there_are_any
    button: |
      **Not applicable, no court-appointed guardian.**:
      ${ word(yesno(not guardians.there_are_any)) }
  - Edit: user_name_change_reason_1
    button: |
      **Reason for the minor name change.**:
      > ${ single_paragraph(user_name_change_reason_1) }
  - Edit: parents[1].needs_interpreter
    button: |
      **Legal Father/Parent 2 needs interpreter.**:
      ${ word(yesno(parents[1].needs_interpreter)) }
  - Edit: guardians[0].needs_interpreter
    button: |
      **Guardian 1 needs interpreter.**:
      ${ word(yesno(guardians[0].needs_interpreter)) }
  - Edit: guardians[1].needs_interpreter
    button: |
      **Guardian 2 needs interpreter.**:
      ${ word(yesno(guardians[1].needs_interpreter)) }
  - Edit: parents[0].needs_interpreter
    button: |
      **Legal Mother/Parent 1 needs interpreter.**:
      ${ word(yesno(parents[0].needs_interpreter)) }
  - Edit: interpreter_languages
    button: |
      **Interpreter language.**:
      ${ interpreter_languages }
  - Edit: user_signature_date
    button: |
      **Date of user signature.**:
      ${ user_signature_date }
  - Edit: user_date_day
    button: |
      **User appearance day.**:
      ${ user_date_day }
  - Edit: user_date_year
    button: |
      **User appearance year.**:
      ${ user_date_year }
  - Edit: user_date_month
    button: |
      **User appearance month.**:
      ${ user_date_month }
  - Edit: user_id
    button: |
      **Minor ID form.**:
      ${ user_id }
  - Edit: date_commission_expiration
    button: |
      **Date of Notary Public commission expiration.**:
      ${ date_commission_expiration }
  - Edit: parent1_signature_date
    button: |
      **Date of Legal Mother/Parent 1 signature.**:
      ${ parent1_signature_date }
  - Edit: parent1_date_day
    button: |
      **Legal Mother/Parent 1 appearance day.**:
      ${ parent1_date_day }
  - Edit: parent1_date_year
    button: |
      **Legal Mother/Parent 1 appearance year.**:
      ${ parent1_date_year }
  - Edit: parent1_date_month
    button: |
      **Legal Mother/Parent 1 appearance month.**:
      ${ parent1_date_month }
  - Edit: parent1_id
    button: |
      **Legal Mother/Parent 1 ID form.**:
      ${ parent1_id }
  - Edit: parent2_signature_date
    button: |
      **Date of Legal Father/Parent 2 signature.**:
      ${ parent2_signature_date }
  - Edit: parent2_date_year
    button: |
      **Legal Father/Parent 2 appearance year.**:
      ${ parent2_date_year }
  - Edit: parent2_date_month
    button: |
      **Legal Father/Parent 2 appearance month.**:
      ${ parent2_date_month }
  - Edit: parent2_date_day
    button: |
      **Legal Father/Parent 2 appearance day.**:
      ${ parent2_date_day }
  - Edit: parent2_id
    button: |
      **Legal Father/Parent 2 ID form.**:
      ${ parent2_id }
  - Edit: guardian_signature_date
    button: |
      **Date of guardian signature**:
      ${ guardian_signature_date }
  - Edit: guardian_name_full_printed
    button: |
      **Full printed Guardian name.**:
      ${ guardian_name_full_printed }
  - Edit: guardian_date_month
    button: |
      **Guardian appearance month.**:
      ${ guardian_date_month }
  - Edit: guardian_date_year
    button: |
      **Guardian appearance year.**:
      ${ guardian_date_year }
  - Edit: guardian_date_day
    button: |
      **Guardian appearance day.**:
      ${ guardian_date_day }
  - Edit: guardian_id
    button: |
      **Guardian ID form.**:
      ${ guardian_id }
  - Edit: attorney_bbo
    button: |
      **Attorney BBO#.**:
      ${ attorney_bbo }
  - Edit: docket_number
    button: |
      **docket_number**:
      ${ docket_number }
  - Edit: users.revisit
    button: |
      **users**

      % for item in users:
        * ${ item }
      % endfor
  - Edit: courts.revisit
    button: |
      **courts**

      % for item in courts:
        * ${ item }
      % endfor
  - Edit: parents.revisit
    button: |
      **parents**

      % for item in parents:
        * ${ item }
      % endfor
  - Edit: guardians.revisit
    button: |
      **guardians**

      % for item in guardians:
        * ${ item }
      % endfor
  - Edit: user_needs_interpreter
    button: |
      **user_needs_interpreter**:
      ${ user_needs_interpreter }
  - Edit: attorneys.revisit
    button: |
      **attorneys**

      % for item in attorneys:
        * ${ item }
      % endfor
  - Edit: notary_public[0]
    button: |
      **notary_public[0]**:
      ${ notary_public[0] }
  - Edit: notary_public[0].signature
    button: |
      **notary_public[0].signature**:
      ${ notary_public[0].signature }
---
continue button field: users.revisit
question: |
  Edit users
subquestion: |
  ${ users.table }

  ${ users.add_action() }
---
table: users.table
rows: users
columns:
  - name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - birthdate: |
      row_item.birthdate if defined("row_item.birthdate") else ""
  - address: |
      row_item.address.block() if defined("row_item.address.county") else ""
  - signature: |
      row_item.signature if defined("row_item.signature") else ""
edit:
  - name.first
  - birthdate
  - address.county
  - signature
confirm: True

---
continue button field: courts.revisit
question: |
  Edit courts
subquestion: |
  ${ courts.table }

  ${ courts.add_action() }
---
table: courts.table
rows: courts
columns:
  - division: |
      row_item.division if defined("row_item.division") else ""
edit:
  - division
confirm: True

---
continue button field: parents.revisit
question: |
  Edit parents
subquestion: |
  ${ parents.table }

  ${ parents.add_action() }
---
table: parents.table
rows: parents
columns:
  - name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - address: |
      row_item.address.block() if defined("row_item.address.county") else ""
  - phone_number: |
      row_item.phone_number if defined("row_item.phone_number") else ""
  - email: |
      row_item.email if defined("row_item.email") else ""
  - signature: |
      row_item.signature if defined("row_item.signature") else ""
edit:
  - name.first
  - address.county
  - phone_number
  - email
  - signature
confirm: True

---
continue button field: guardians.revisit
question: |
  Edit guardians
subquestion: |
  ${ guardians.table }

  ${ guardians.add_action() }
---
table: guardians.table
rows: guardians
columns:
  - name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - address: |
      row_item.address.block() if defined("row_item.address.county") else ""
  - phone_number: |
      row_item.phone_number if defined("row_item.phone_number") else ""
  - email: |
      row_item.email if defined("row_item.email") else ""
  - signature: |
      row_item.signature if defined("row_item.signature") else ""
edit:
  - name.first
  - address.county
  - phone_number
  - email
  - signature
confirm: True

---
continue button field: attorneys.revisit
question: |
  Edit attorneys
subquestion: |
  ${ attorneys.table }

  ${ attorneys.add_action() }
---
table: attorneys.table
rows: attorneys
columns:
  - signature: |
      row_item.signature if defined("row_item.signature") else ""
  - name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - address: |
      row_item.address.block() if defined("row_item.address.zip") else ""
  - phone_number: |
      row_item.phone_number if defined("row_item.phone_number") else ""
  - email: |
      row_item.email if defined("row_item.email") else ""
edit:
  - signature
  - name.first
  - address.zip
  - phone_number
  - email
confirm: True

---
id: download petition_to_name_change_minor_CJP25
event: petition_to_name_change_minor_CJP25_download
question: |
  Your form is ready to download.
subquestion: |
  Thank you ${users}. Your form is ready to download and deliver.
  
  View, download and send your form below. Click the "Make changes" button to fix any mistakes.

  ${ action_button_html(url_action('review_petition_to_name_change_minor_CJP25'), label='Make changes', color='info') }
  
  
  ${ al_user_bundle.download_list_html() }
  

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }

progress: 100
---
objects:
  - Post_interview_instructions: ALDocument.using(title="Instructions", filename="petition_to_name_change_minor_CJP25_next_steps.docx", enabled=True, has_addendum=False)
  - petition_to_name_change_minor_CJP25_attachment: ALDocument.using(title="This form will help you to change the name for a minor child.", filename="petition_to_name_change_minor_CJP25_fielded.pdf", enabled=True, has_addendum=False)
  - Post_interview_instructions: ALDocument.using(title="Instructions", filename="petition_to_name_change_minor_CJP25_next_steps.docx", enabled=True, has_addendum=False)
  - petition_to_name_change_minor_CJP25_attachment: ALDocument.using(title="This form will help you to change the name for a minor child.", filename="petition_to_name_change_minor_CJP25_fielded.pdf", enabled=True, has_addendum=False)
---
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[Post_interview_instructions,petition_to_name_change_minor_CJP25_attachment], filename="petition_to_name_change_minor_CJP25_package.pdf", title="All forms to download for your records")
  - al_court_bundle: ALDocumentBundle.using(elements=[petition_to_name_change_minor_CJP25_attachment], filename="petition_to_name_change_minor_CJP25_package.pdf", title="All forms to download for your records")
---
attachments:
  - name: Post interview instructions
    filename: Post-interview-instructions     
    variable name: Post_interview_instructions[i]        
    docx template file: petition_to_name_change_minor_CJP25_next_steps.docx
  - name: petition to name change minor CJP25 attachment
    filename: petition_to_name_change_minor_CJP25     
    variable name: petition_to_name_change_minor_CJP25_attachment[i]        
    skip undefined: True
    pdf template file: petition_to_name_change_minor_CJP25_fielded.pdf
    fields:
      - "docket_number": ${ docket_number }
      - "user_name_middle": ${ users[0].name.middle }
      - "user_name_middle__2": ${ users[0].name.middle }
      - "user_name_middle__3": ${ new_name_middle }
      - "user_name_last": ${ users[0].name.last }
      - "user_name_last__2": ${ users[0].name.last }
      - "user_name_last__3": ${ new_name_last }
      - "court_division": ${ courts[0].division }
      - "user_name_first": ${ users[0].name.first }
      - "user_name_first__2": ${ users[0].name.first }
      - "user_name_first__3": ${ new_name_first }
      - "user_birthdate": ${ users[0].birthdate.format() }
      - "user_age": ${ users[0].age_in_years() }
      - "user_address_street": ${ users[0].address.address }
      - "user_address_unit": ${ users[0].address.unit }
      - "user_address_city": ${ users[0].address.city }
      - "user_address_state": ${ users[0].address.state }
      - "user_address_zip": ${ users[0].address.zip }
      - "parent2_name_full": ${ parents[1] }
      #- "parent2_name_full__2": ${ parents[1] }
      #- "parent2_name_full__3": ${ parents[1] }
      - "parent1_name_full": ${ parents[0] }
      #- "parent1_name_full__2": ${ parents[0] }
      #- "parent1_name_full__3": ${ parents[0] }
      - "parent1_address_street": ${ parents[0].address.address }
      - "parent1_address_unit": ${ parents[0].address.unit }
      - "parent2_address_street": ${ parents[1].address.address }
      - "parent2_address_unit": ${ parents[1].address.unit }
      - "parent1_address_zip": ${ parents[0].address.zip }
      - "parent1_address_city": ${ parents[0].address.city }
      - "parent1_address_state": ${ parents[0].address.state }
      - "parent2_address_city": ${ parents[1].address.city }
      - "parent2_address_state": ${ parents[1].address.state }
      - "parent2_address_zip": ${ parents[1].address.zip }
      - "parent1_phone": ${ parents[0].phone_number }
      - "parent2_phone": ${ parents[1].phone_number }
      - "parent1_email": ${ parents[0].email }
      - "parent2_email": ${ parents[1].email }
      - "guardian_name_full": ${ guardians[0] }
      - "guardian_address_street": ${ guardians[0].address.address }
      - "guardian_address_unit": ${ guardians[0].address.unit }
      - "guardian2_address_street": ${ guardians[1].address.address }
      - "guardian2_address_unit": ${ guardians[1].address.unit }
      - "guardian2_address_zip": ${ guardians[1].address.zip }
      - "guardian_address_city": ${ guardians[0].address.city }
      - "guardian_address_state": ${ guardians[0].address.state }
      - "guardian_address_zip": ${ guardians[0].address.zip }
      - "guardian2_address_city": ${ guardians[1].address.city }
      - "guardian2_address_state": ${ guardians[1].address.state }
      - "guardian2_phone": ${ guardians[1].phone_number }
      - "guardian_phone": ${ guardians[0].phone_number }
      - "guardian2_email": ${ guardians[1].email }
      - "guardian_email": ${ guardians[0].email }
      - "user_needs_interpreter": ${ user_needs_interpreter }
      #- "user_signature": ${ users[0].signature_if_final(i) }
      #- "user_name_full": ${ users[0] }
      #- "user_name_full__2": ${ users[0] }
      #- "user_address_county": ${ users[0].address.county }
      #- "parent1_signature": ${ parents[0].signature_if_final(i) }
      #- "parent1_address_county": ${ parents[0].address.county }
      #- "parent2_signature": ${ parents[1].signature_if_final(i) }
      #- "parent2_address_county": ${ parents[1].address.county }
      #- "guardian_signature": ${ guardians[0].signature_if_final(i) }
      #- "guardian_address_county": ${ guardians[0].address.county }
      - "attorney_signature": ${ attorneys[0].signature_if_final(i) }
      - "attorney_name_full": ${ attorneys[0] }
      - "attorney_address_street": ${ attorneys[0].address.address }
      - "attorney_address_unit": ${ attorneys[0].address.unit }
      - "attorney_address_city": ${ attorneys[0].address.city }
      - "attorney_address_state": ${ attorneys[0].address.state }
      - "attorney_address_zip": ${ attorneys[0].address.zip }
      - "attorney_phone": ${ attorneys[0].phone_number }
      - "attorney_email": ${ attorneys[0].email }
      #- "notary_public_name": ${ notary_public[0] }
      #- "notary_public_name__2": ${ notary_public[0] }
      #- "notary_public_name__3": ${ notary_public[0] }
      #- "notary_public_name__4": ${ notary_public[0] }
      - "guardian2_full_name": ${ guardians[1] }
      #- "notary_public_signature": ${ notary_public[0].signature_if_final(i) }
      #- "notary_public_signature__2": ${ notary_public[0].signature_if_final(i) }
      #- "notary_public_signature__3": ${ notary_public[0].signature_if_final(i) }
      #- "notary_public_signature__4": ${ notary_public[0].signature_if_final(i) }
      - "presented_by_parent2": ${ parents[1].is_presenting }
      - "presented_by_parent1": ${ parents[0].is_presenting }
      - "presented_by_guardian": ${ guardians[0].is_presenting or guardians[1].is_presenting }
      - "doc_or_dys_yes": ${ doc_or_dys_yes }
      - "prior_name_change_yes": ${ prior_name_change }
      - "prior_name_change_no": ${ not prior_name_change }
      - "user_name_change_from": ${ user_name_change_from }
      - "user_name_change_to": ${ user_name_change_to }
      - "user_name_change_reason": ${ user_name_change_reason }
      - "return_request_yes": ${ return_request_yes }
      - "one_parent_listed_yes": ${ one_parent_listed }
      - "deceased_parent_listed_yes": ${ deceased_parent_listed_yes }
      - "parent_listed_rights_terminated_yes": ${ parent_listed_rights_terminated_yes }
      - "guardian_yes": ${ guardians.there_are_any }
      - "guardian_no": ${ not guardians.there_are_any }
      - "minor_under_12_yes": ${ minor_under_12_yes }
      - "parent1_assent_yes": ${ parents[0].gives_assent }
      - "parent1_assent_no": ${ not parents[0].gives_assent }
      - "parent1_assent_no_explanation": ${ parents[0].no_assent_explanation }
      - "parent2_assent_yes": ${ parents[1].gives_assent }
      - "parent2_assent_no": ${ not parents[1].gives_assent }
      - "parent2_assent_no_explanation": ${ parents[1].no_assent_explanation }
      - "guardian_assent_yes": ${ guardians[0].gives_assent or guardians[1].gives_assent }
      - "guardian_assent_no": ${ not guardians[0].gives_assent or not guardians[1].gives_assent }
      - "guardian_assent_no_explanation": ${ comma_list(guardian_explanation) }
      - "guardian_assent_not_applicable": ${ not guardians.there_are_any }
      - "user_name_change_reason_1": ${ user_name_change_reason_1 }
      - "parent2_needs_interpreter": ${ parents[1].needs_interpreter }
      - "guardian_needs_interpreter": ${ guardians[0].needs_interpreter or guardians[1].needs_interpreter }
      - "parent1_needs_interpreter": ${ parents[0].needs_interpreter }
      - "interpreter_language": ${ comma_and_list(interpreter_languages) }
      #- "user_signature_date": ${ user_signature_date }
      #- "user_date_day": ${ user_date_day }
      #- "user_date_year": ${ user_date_year }
      #- "user_date_month": ${ user_date_month }
      #- "user_id": ${ user_id }
      #- "date_commission_expiration": ${ date_commission_expiration }
      #- "date_commission_expiration__2": ${ date_commission_expiration }
      #- "date_commission_expiration__3": ${ date_commission_expiration }
      #- "date_commission_expiration__4": ${ date_commission_expiration }
      #- "parent1_signature_date": ${ parent1_signature_date }
      #- "parent1_date_day": ${ parent1_date_day }
      #- "parent1_date_year": ${ parent1_date_year }
      #- "parent1_date_month": ${ parent1_date_month }
      #- "parent1_id": ${ parent1_id }
      #- "parent2_signature_date": ${ parent2_signature_date }
      #- "parent2_date_year": ${ parent2_date_year }
      #- "parent2_date_month": ${ parent2_date_month }
      #- "parent2_date_day": ${ parent2_date_day }
      #- "parent2_id": ${ parent2_id }
      #- "guardian_signature_date": ${ guardian_signature_date }
      #- "guardian_name_full_printed": ${ guardian_name_full_printed }
      #- "guardian_name_full_printed__2": ${ guardian_name_full_printed }
      #- "guardian_date_month": ${ guardian_date_month }
      #- "guardian_date_year": ${ guardian_date_year }
      #- "guardian_date_day": ${ guardian_date_day }
      #- "guardian_id": ${ guardian_id }
      - "attorney_bbo": ${ attorney_bbo }